---
import type { Language } from '../../lib/i18n';
import { getLocalizedPath } from '../../lib/i18n';
import type { BlogPost } from '../../lib/blog-data';

interface Props {
  content: {
    eyebrow: string;
    title: string;
    description: string;
    viewAll: string;
    readMore: string;
  };
  posts: BlogPost[];
  lang: Language;
}

const { content, posts, lang } = Astro.props;
---

<section class="py-20 lg:py-28">
  <div class="container mx-auto px-4">
    <div class="flex items-end justify-between mb-14" data-animate="fade-in-up">
      <div>
        <span class="eyebrow-decorated text-sm font-semibold uppercase tracking-widest text-accent">{content.eyebrow}</span>
        <h2 class="mt-4 text-3xl font-bold tracking-tight font-display sm:text-4xl">{content.title}</h2>
        <p class="mt-4 text-lg text-muted-foreground max-w-2xl">{content.description}</p>
      </div>
      <a
        href={getLocalizedPath('/blog', lang)}
        class="hidden sm:inline-flex items-center gap-2 text-sm font-semibold text-primary hover:text-accent transition-colors group"
      >
        {content.viewAll}
        <svg class="h-4 w-4 transition-transform group-hover:translate-x-1" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
        </svg>
      </a>
    </div>
    <div class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {posts.map((post, i) => (
        <a
          href={getLocalizedPath(`/blog/${post.slug}`, lang)}
          class="group rounded-xl border border-border bg-card shadow-sm card-hover-lift overflow-hidden hover:border-primary/30"
          data-animate="fade-in-up"
          data-animate-delay={String((i + 1) * 100)}
        >
          <div class="aspect-video overflow-hidden bg-muted blog-card-image">
            <img
              src={post.image}
              alt={post.imageAlt}
              class="h-full w-full object-cover transition-transform duration-500 group-hover:scale-105"
              loading="lazy"
              width="400"
              height="225"
            />
          </div>
          <div class="p-5">
            <span class="text-xs font-semibold text-accent">{post.category}</span>
            <h3 class="mt-2 text-base font-semibold text-card-foreground line-clamp-2 font-display">
              {post.title}
            </h3>
            <p class="mt-2 text-sm text-muted-foreground line-clamp-2">{post.excerpt}</p>
            <span class="mt-3 inline-flex items-center gap-1 text-sm font-medium text-primary group-hover:gap-2 transition-all">
              {content.readMore}
              <svg class="h-3.5 w-3.5" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5L21 12m0 0l-7.5 7.5M21 12H3" />
              </svg>
            </span>
          </div>
        </a>
      ))}
    </div>
    <div class="sm:hidden mt-8 text-center">
      <a
        href={getLocalizedPath('/blog', lang)}
        class="inline-flex items-center gap-1 text-sm font-semibold text-primary hover:text-accent transition-colors"
      >
        {content.viewAll} â†’
      </a>
    </div>
  </div>
</section>
