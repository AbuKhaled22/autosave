---
/**
 * PriceTable — displays service pricing in a clean table/card layout.
 * Used on service, component, and city pages.
 */
import type { Language } from '../../lib/i18n';

interface PriceRow {
  label: string;
  priceRange: string;
  note?: string;
}

interface Props {
  rows: PriceRow[];
  lang: Language;
  title?: string;
  currency?: string;
}

const { rows, lang, title, currency } = Astro.props;

const sectionTitle =
  title ?? (lang === 'ar' ? 'الأسعار التقديرية' : 'Estimated Pricing');

const currencyLabel = currency ?? (lang === 'ar' ? 'ريال' : 'SAR');
---

{rows.length > 0 && (
  <section class="py-20 lg:py-28" data-animate="fade-in-up">
    <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
      <div class="mb-10 text-center">
        <span class="eyebrow-decorated text-sm font-semibold uppercase tracking-widest text-primary">
          {lang === 'ar' ? 'التكلفة' : 'Cost'}
        </span>
        <h2 class="mt-4 font-display text-2xl font-bold text-foreground sm:text-3xl">
          {sectionTitle}
        </h2>
      </div>

      {/* Mobile: cards layout */}
      <div class="space-y-3 sm:hidden">
        {rows.map((row, index) => (
          <div
            class="rounded-xl border border-border bg-card p-4 shadow-sm"
            data-animate="fade-in-up"
            data-animate-delay={String((index + 1) * 100)}
          >
            <div class="font-display font-semibold text-foreground">
              {row.label}
            </div>
            <div class="mt-1 text-lg font-bold text-primary">
              {row.priceRange} <span class="text-sm font-normal text-muted-foreground">{currencyLabel}</span>
            </div>
            {row.note && (
              <p class="mt-1 text-sm text-muted-foreground">{row.note}</p>
            )}
          </div>
        ))}
      </div>

      {/* Desktop: table layout */}
      <div class="hidden overflow-hidden rounded-xl border border-border bg-card shadow-sm sm:block">
        <table class="w-full text-start">
          <thead>
            <tr class="border-b border-border bg-secondary/40">
              <th class="px-6 py-4 text-start font-display font-semibold text-foreground">
                {lang === 'ar' ? 'الخدمة' : 'Service'}
              </th>
              <th class="px-6 py-4 text-start font-display font-semibold text-foreground">
                {lang === 'ar' ? 'السعر' : 'Price'}
              </th>
              <th class="px-6 py-4 text-start font-display font-semibold text-foreground">
                {lang === 'ar' ? 'ملاحظات' : 'Notes'}
              </th>
            </tr>
          </thead>
          <tbody>
            {rows.map((row, index) => (
              <tr
                class:list={[
                  'border-b border-border last:border-b-0',
                  index % 2 === 1 ? 'bg-secondary/20' : '',
                ]}
              >
                <td class="px-6 py-4 font-medium text-foreground">
                  {row.label}
                </td>
                <td class="px-6 py-4 font-bold text-primary">
                  {row.priceRange} <span class="text-sm font-normal text-muted-foreground">{currencyLabel}</span>
                </td>
                <td class="px-6 py-4 text-sm text-muted-foreground">
                  {row.note ?? '—'}
                </td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>

      <p class="mt-4 text-center text-sm text-muted-foreground">
        {lang === 'ar'
          ? '* الأسعار تقديرية وقد تختلف حسب نوع السيارة وحالتها. تواصل معنا للحصول على عرض سعر دقيق.'
          : '* Prices are estimates and may vary depending on vehicle type and condition. Contact us for an accurate quote.'}
      </p>
    </div>
  </section>
)}
